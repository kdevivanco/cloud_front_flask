{% extends "base_dashboard.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<div class="col-5">
  <!--Card with features-->
  <div class="col-12">
    <h1>Welcome back, {{user.name}}</h1>
    <div class="m-5 card bg-secondary mb-3">
      <div class="row g-0">
        <div class="col-md-8">
          <div class="card-body p-3">
            <h5 class="feature-title"><span>Find </span> new reads with our SmartSearch feature</h5>
            <a href="#" class="btn  btn-light mt-3 poppins-light" style="font: 'Poppins', sans-serif;">See
              Recomendations</a>
          </div>
        </div>
        <div class="col-md-4">
          <img src="{{ url_for('static', filename='images/features.png') }}" class="mt-5 center img-fluid rounded-start"
            style="max-width: 120%!important" alt="...">
        </div>

      </div>
    </div>
  </div>
  <!--Latest reviews-->
  <div class="col-12">
    <p class="h3">Latest Reviews</p>
    {%for review in user_reviews%}
    <div class="card mb-3">
      <div class="row g-0">
        <div class="col-md-3">
          <img src="{{review.book.image_url}}" class=" p-3 img-fluid rounded-start"
            alt="...">
        </div>
        <div class="col-md-5">
          <div class="card-body">
            <h5 class="card-title">{{review.book.title}}</h5>
            <p class="card-text">{{review.description}}</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="row ">
            <div class="row star-row mt-5">
              {%for r in range(0,review.rating)%}
              <div class="col-2 star"><i class="sidebar-icon glyphicon glyphicon-star"></i></div>
              {%endfor%}
            </div>
          </div>
        </div>
      </div>
    </div>
    {%endfor%}
  </div>
</div>
<div class="col-5">
  <h3>Currently trending</h3>
  <div class="row">
    {% for book in latest_books[0:3] %}
  <div class="col-3">
    <div class="card mb-3" style="max-width: 540px; height: 420px;">
      <div class="row g-0">
        <div class="col-md-12">
          <div class="card-body">
            <div style="width: 100%; height: 200px; overflow: hidden; display: flex; justify-content: center; align-items: center;">
              <a href="/book/{{book.isbn}}">
                <img src="{{book.image_url}}" style="max-width: 100%; max-height: 100%; object-fit: contain;" class="img-fluid rounded-start" alt="...">
              </a>
            </div>
            <h5 class="card-title">
              <a href="/book/{{book.isbn}}" style="text-decoration: none; color: inherit;">{{book.title}}</a>
            </h5>
            <h6 class="card-subtitle"> {{book.author}}</h6>
            <p></p>
            <p>ISBN: {{book.isbn}}</p>
            <p class="card-text">{{book.description}}</p>
            <p class="card-text"><small class="text-body-secondary">{{book.pub_year}}</small></p>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endfor %}


  </div>
  <div class="row">
    {% for book in latest_books[3:6] %}
    <div class="col-3">
      <div class="card mb-3" style="max-width: 540px; height: 420px;">
        <div class="row g-0">
          <div class="col-md-12">
            <div class="card-body">
              <div style="width: 100%; height: 200px; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                <a href="/book/{{book.isbn}}">
                  <img src="{{book.image_url}}" style="max-width: 100%; max-height: 100%; object-fit: contain;" class="img-fluid rounded-start" alt="...">
                </a>
              </div>
              <h5 class="card-title">
                <a href="/book/{{book.isbn}}" style="text-decoration: none; color: inherit;">{{book.title}}</a>
              </h5>
              <p></p>
              <p>ISBN: {{book.isbn}}</p>
              <p class="card-text">{{book.description}}</p>
              <p class="card-text"><small class="text-body-secondary">{{book.pub_year}}</small></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
  

  </div>

</div>


{% endblock %}